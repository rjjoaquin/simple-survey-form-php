<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> Survey Form - RJ Web Developer</title>
    <link rel="stylesheet" type="text/css" href="stylesheet.css">


<?php
// include database connection file
require_once'dbconfig.php';
if(isset($_POST['insert']))
{
// Posted Values
$name=$_POST['name'];
$email=$_POST['email'];
$yearsinvesting=$_POST['yearsinvesting'];
$investedamount=$_POST['investedamount'];
$investments=$_POST['investments'];
$investmentstory=$_POST['investmentstory'];
$newsletter=$_POST['newsletter'];
$date=date("Y/m/d");
// Query for Insertion
$sql="INSERT INTO results(name,email,yearsinvesting,investedamount,investments,investmentstory,newsletter,date) VALUES(:name,:email,:yearsinvesting,:investedamount,:investments,:investmentstory,:newsletter,:date)";
//Prepare Query for Execution
$query = $dbh->prepare($sql);
// Bind the parameters
$query->bindParam(':name',$name,PDO::PARAM_STR);
$query->bindParam(':email',$email,PDO::PARAM_STR);
$query->bindParam(':yearsinvesting',$yearsinvesting,PDO::PARAM_STR);
$query->bindParam(':investedamount',$investedamount,PDO::PARAM_STR);
$query->bindParam(':investments',$investments,PDO::PARAM_STR);
$query->bindParam(':investmentstory',$investmentstory,PDO::PARAM_STR);
$query->bindParam(':newsletter',$newsletter,PDO::PARAM_STR);
$query->bindParam(':date',$date,PDO::PARAM_STR);
// Query Execution
$query->execute();
// Check that the insertion really worked. If the last inserted id is greater than zero, the insertion worked.
$lastInsertId = $dbh->lastInsertId();
if($lastInsertId)
{
// Message for successfull insertion
echo "<script>alert('Record inserted successfully');</script>";
echo "<script>window.location.href='form-succes.html'</script>";
}
else
{
// Message for unsuccessfull insertion
echo "<script>alert('Something went wrong. Please try again');</script>";
echo "<script>window.location.href='form-failure.html'</script>";
}
}
?>


</head>
<div id="body-div">
    <h1 id="title"> Investor Survey Form </h1>
    <div id="description-div">
        <p id="description"> Hello! We would love to get to know you as an investor in order for us to
            provide you
            with better investment opportunities. Please fill up the questionnaire below. </p>
    </div>

    <div id="form-div">
        <form id="survey-form" method='POST' >
         
            <div id="input-not-submit">
                <label id="name-label"> Your name(Required) </label> 
                <br>
                <input type=text name=name id=name minlength=4 maxlength=200 required />
                <br>



                <label id="email-label"> Your email(Required) </label> 
                <br>
                <input type=email name=email id=email minlength=4 maxlength=200 />
                <br>


                <label id="number-label"> How many years have you been investing?</label>
                <br>
                <input type=number name=yearsinvesting id=yearsinvesting max=100 required />
                <br>


                <label id="dropdown-label"> How much have you invested?</label>
                <br>
                <input type=number name=investedamount id=investedamount min=0 max=9999999999 />
                <br>



                <label id="checkbox-label"> What investments have you
                    invested in?</label> <br>
                    <input type=checkbox class=cboption name="investments" value="High Interest Savings Accounts"><label for="High Interest Savings Accounts">High Interest Savings Accounts</label>
                    <input type=checkbox class=cboption name="investments" value="Mutual Funds"><label for="Mutual Funds">Mutual Funds</label>
                    <input type=checkbox class=cboption name="investments" value="Bonds"><label for="Bonds">Bonds</label>
                    <input type=checkbox class=cboption name="investments" value="Stocks"><label for="Stocks">Stocks</label>
                    <input type=checkbox class=cboption name="investments" value="Real Estate"><label for="Real Estate">Real Estate</label>
                    <input type=checkbox class=cboption name="investments" value="Alternative Investments"><label for="Alternatives">Alternative Investments</label>
            </div>
            <br>



            <label id="textareadesc">
                Recount
                Your
                First
                Investment
                Experience(Optional)
            </label>
            <br>
            <input type=textarea name=investmentstory id=investmentstory maxlength=2500/>
            <br>
            <label id="radio-label">
                Would
                you
                like
                to
                subscribe
                to
                our
                investment
                newsletter?
            </label>
            <input type=radio class=cboption name="newsletter" value="Yes"><label for="newsletter">Yes</label>
            <input type=radio class=cboption name="newsletter" value="No"><label for="no">No</label><br>

         
            <input type='submit' id='submitbtn' value='Submit'>
            <br>



    </div>


    </form>
    

</div>

</body>
<footer>
Designed By <a id="white-link" href="https://rjwebdeveloper.com">RJ Web Developer</a>
</footer>
</html>
